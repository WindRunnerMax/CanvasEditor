(self.webpackChunksketching_react=self.webpackChunksketching_react||[]).push([["src_components_preview_index_tsx"],{36024:function(e,t,r){e.exports={canvas:"_1886f6a9d31c6f4a",container:"_805924781984b8ed"}},72007:function(e,t,r){"use strict";r.r(t),r.d(t,{Body:function(){return h}});var n=r("82817"),i=r("2177"),o=r("68783"),a=r.n(o),c=r("27643"),s=r("11660"),u=r("51307"),f=r("36024"),d=r("50081"),h=(0,i.forwardRef)(function(e,t){var r=(0,i.useRef)(null),o=u.Background.rect,h=o.width,l=o.height;return(0,i.useEffect)(function(){e.editor.event.once(c.EDITOR_EVENT.PAINT,function(){var t=r.current;t&&a.render((0,n.jsx)(d.Links,{editor:e.editor}),t)})},[e.editor]),(0,n.jsxs)("div",{className:(0,s.cs)(f.container),children:[(0,n.jsx)("div",{className:f.canvas,ref:t,style:{width:h,height:l}}),(0,n.jsx)("div",{ref:r})]})})},50081:function(e,t,r){"use strict";r.r(t),r.d(t,{Links:function(){return f}});var n=r("82817"),i=r("2177"),o=r.n(i),a=r("62423"),c=r("11660"),s=r("51307"),u=new a.RichText,f=function(e){var t=e.editor,r=(0,i.useMemo)(function(){var e=t.deltaSet,r=[];return e.forEach(function(e,t){if(t&&t.key===a.Text.KEY){var n=t.getAttr(a.TEXT_ATTRS.DATA),i=t.getRect(),o=i.x,f=i.y,d=i.width,h=i.height,l=n&&(0,c.TSON).parse(n),g=u.parse(l||[],d),T=o,v=f,x=!0,w=!1,E=void 0;try{for(var _,k=g[Symbol.iterator]();!(x=(_=k.next()).done);x=!0){var y=_.value,p=v+y.height;if(p>f+h)break;if(y.config[a.TEXT_ATTRS.DIVIDING_LINE]){T=o,v+=a.DIVIDING_LINE_OFFSET;continue}T+=y.offsetX;for(var m=y.break?0:Math.max(0,(d-y.width-y.offsetX)/y.items.length),R=m/2,I=0;I<y.items.length;++I){var L=y.items[I];if(L.config[a.TEXT_ATTRS.LINK]){for(var S=L.width+R,N=I+1;N<y.items.length;++N){var A=y.items[N];if(A.config[a.TEXT_ATTRS.LINK])S=S+A.width+R,A.config[a.TEXT_ATTRS.LINK]="";else break}r.push({x:T-R-s.Background.rect.x,y:p-y.originHeight-s.Background.rect.y,width:S,height:y.originHeight,url:L.config[a.TEXT_ATTRS.LINK]||""})}T=T+L.width+m}T=o,v=p}}catch(e){w=!0,E=e}finally{try{!x&&null!=k.return&&k.return()}finally{if(w)throw E}}}}),r},[t]);return(0,n.jsx)(o.Fragment,{children:r.map(function(e,t){return(0,n.jsx)(o.Fragment,{children:(0,n.jsx)("a",{style:{position:"absolute",left:e.x+"px",top:e.y+"px",display:"block",width:e.width+"px",height:e.height+"px"},href:e.url,target:"_blank"})},t)})})}},77475:function(e,t,r){"use strict";r.r(t),r.d(t,{Preview:function(){return h}});var n=r("82817"),i=r("2177"),o=r("27643"),a=r("12185"),c=r("11660"),s=r("73632"),u=r("51307"),f=r("23108"),d=r("72007"),h=function(){var e=(0,i.useRef)(null),t=(0,i.useMemo)(function(){var e=(0,c.storage).local.get(f.STORAGE_KEY)||f.EXAMPLE,t=e&&e.deltaSetLike;return(0,u.Background).setRange((0,o.Range).fromRect(e.x,e.y,e.width,e.height)),new o.Editor({deltaSet:new a.DeltaSet(t),logLevel:o.LOG_LEVEL.INFO,readonly:!0})},[]);return(0,i.useLayoutEffect)(function(){window.editor=t;var r=e.current;r&&t.onMount(r),window.editor=t,t.canvas.grab.setState(!1);var n=u.Background.rect,i=n.x,o=n.y;return t.canvas.setOffset(i,o),function(){t.destroy()}},[t]),(0,n.jsx)(s.WithEditor,{editor:t,children:(0,n.jsx)(d.Body,{ref:e,editor:t})})}}}]);